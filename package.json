{
  "name": "brick",
  "private": true,
  "description": "Literally the best CMS",
  "//scripts": {
    "dev": "Start dev servers for the app (server+clients).",
    "check": "Typecheck (but not lint!) all packages.",
    "build:tg-bot": "Build the tg-bot. It's a part of the server, but we still have a separate command for it so that it's easier to grep for.",
    "renew-certs": "Renew SSL certificates for brick.do domains."
  },
  "scripts": {
    "dev": "tsx dev.ts",
    "check": "turbo check --log-prefix=none",
    "lint": "eslint .",
    "validate-deps": "tsx scripts/validate-deps.ts",
    "build:tg-bot": "turbo build -F server",
    "setEnv:prod": "pnpm run server:setEnv:prod && pnpm run client:setEnv:prod && pnpm run landing:setEnv:prod",
    "setEnv:staging": "pnpm run server:setEnv:staging && pnpm run client:setEnv:staging && pnpm run landing:setEnv:staging",
    "client:setEnv:prod": "cd apps/client && cp .env.prod .env",
    "client:setEnv:staging": "cd apps/client && cp .env.staging .env",
    "server:setEnv:prod": "cd apps/server && cp .env.prod .env",
    "server:setEnv:staging": "cd apps/server && cp .env.staging .env",
    "server:runMigrations": "cd apps/server && pnpm run migration:run",
    "landing:setEnv:prod": "cd apps/landing && cp .env.prod .env",
    "landing:setEnv:staging": "cd apps/landing && cp .env.staging .env",
    "start:prod": "pnpm -C apps/server run start:prod",
    "start:tg-bot:prod": "pnpm -C apps/server run start:tg-bot:prod",
    "start:landing:prod": "pnpm -C apps/landing run start:prod",
    "renew-certs": "turbo -F renew-certs start --log-prefix=none --",
    "screenshot-compare": "turbo -F screenshot-compare start --log-prefix=none --",
    "size": "echo client && echo ------ && size-limit apps/client/build/static/js/*.js && echo public-client && echo ------------- && size-limit apps/public-client/build/client/static/js/*.js",
    "theme-screenshots:generate": "pnpm -C tools/themes-screenshoter run start",
    "clean": "find . -name 'node_modules' -type d -prune -exec rm -rf '{}' + ; rm -rf build apps/client/build apps/public-client/build apps/server/dist apps/landing/.next",
    "test": "turbo build -F tests^... --output-logs=errors-only && playwright test",
    "test:docker:build-env": "docker build . -f docker/Dockerfile.playwright-env --build-arg=\"PLAYWRIGHT_VERSION=$(yq '.importers.\".\".devDependencies.\"@playwright/test\".version' pnpm-lock.yaml)\" -t brick-playwright-env",
    "test:docker": "pnpm run test:docker:build-env -q && docker run --add-host=host.docker.internal:host-gateway -it --rm -v \"$PWD:/brick\" -v \"$(mkcert -CAROOT):/mkcert-ca\" brick-playwright-env",
    "format": "prettier --write \"**/*.{json,js,jsx,ts,tsx,yml,yaml,css}\"",
    "format:check": "prettier --check \"**/*.{json,js,jsx,ts,tsx,yml,yaml,css}\""
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/brickdo/brick.git"
  },
  "bugs": {
    "url": "https://github.com/brickdo/brick/issues"
  },
  "homepage": "https://brick.do",
  "//dependencies": {
    "react-error-overlay": "Pinned due to https://github.com/facebook/create-react-app/issues/11773",
    "overmind": "Pinned due to https://github.com/cerebral/overmind/issues/589. The issue is closed, but I'm still experiencing this with newer overmind.",
    "overmind-react": "See overmind",
    "typescript": "Can't be upgraded to 5.* because of https://github.com/nestjs/nest/issues/10959, so we need newer Nest first. Even after that, can't be upgraded past 5.1.6 because of typescript-eslint (which in turn can't be upgraded before migrating to newer Next)."
  },
  "dependencies": {
    "@babel/core": "^7.16.5",
    "@babel/eslint-parser": "^7.16.5",
    "@babel/preset-env": "^7.16.5",
    "@babel/preset-react": "^7.16.5",
    "@babel/preset-typescript": "^7.16.5",
    "@babel/runtime": "^7.16.5",
    "@emotion/babel-plugin": "^11.7.1",
    "@emotion/babel-preset-css-prop": "^11.2.0",
    "@emotion/cache": "^11",
    "@emotion/core": "npm:@emotion/react@^11",
    "@emotion/css": "./overrides/emotion-css@10",
    "@emotion/eslint-plugin": "^11.7.0",
    "@emotion/react": "^11.7.1",
    "@emotion/serialize": "^1.1.3",
    "@emotion/styled": "^11.6.0",
    "@emotion/styled-base": "./overrides/emotion-styled-base@10",
    "@material-ui/core": "^4.12.3",
    "@pmmmwh/react-refresh-webpack-plugin": "^0.5.3",
    "@radix-ui/react-checkbox": "^0.1.4",
    "@react-icons/all-files": "^4.1.0",
    "@react-spring/web": "^9.3.2",
    "@sajari/react-hooks": "^3.8.0",
    "@sajari/react-search-ui": "^4.11.0",
    "@sindresorhus/slugify": "^1.1.0",
    "@statoscope/webpack-plugin": "^5.19.2",
    "@stripe/stripe-js": "^1.22.0",
    "@svgr/webpack": "^6.1.2",
    "@teamsupercell/typings-for-css-modules-loader": "^2.5.1",
    "@tippyjs/react": "^4.2.6",
    "acme-client": "^4.2.5",
    "autoprefixer": "^10.4.0",
    "axios": "^0.24.0",
    "babel-jest": "^27.4.5",
    "babel-loader": "^8.2.3",
    "babel-plugin-inline-react-svg": "^2.0.1",
    "babel-plugin-named-asset-import": "^0.3.8",
    "babel-preset-react-app": "^10.0.1",
    "bfj": "^7.0.2",
    "body-parser": "^1.19.1",
    "cache-manager": "^3.6.0",
    "camelcase": "^6.2.1",
    "case-sensitive-paths-webpack-plugin": "^2.4.0",
    "class-transformer": "^0.5.1",
    "class-validator": "^0.13.2",
    "clsx": "^1.1.1",
    "comlink": "^4.3.1",
    "compression": "^1.7.4",
    "concurrently": "^6.5.0",
    "cookie-parser": "^1.4.6",
    "cron": "^1.8.2",
    "css-box-model": "^1.2.1",
    "css-loader": "^6.5.1",
    "css-minimizer-webpack-plugin": "^3.3.0",
    "cssnano": "^5.0.13",
    "cssnano-preset-advanced": "^5.1.9",
    "dotenv": "^10.0.0",
    "dotenv-expand": "^5.1.0",
    "emotion-theming": "npm:@emotion/react@^11",
    "eslint-config-next": "^12.0.7",
    "eslint-config-react-app": "^7.0.0",
    "eslint-loader": "^4.0.2",
    "eslint-plugin-flowtype": "^8.0.3",
    "eslint-plugin-import": "^2.25.3",
    "eslint-plugin-jest": "^25.3.0",
    "eslint-plugin-jsx-a11y": "^6.5.1",
    "eslint-plugin-react": "^7.27.1",
    "eslint-plugin-react-hooks": "^4.3.0",
    "eslint-plugin-testing-library": "^5.0.1",
    "eslint-webpack-plugin": "^3.1.1",
    "evergreen-ui": "^4.24.0",
    "express": "^4.17.2",
    "express-handlebars": "^6.0.2",
    "file-loader": "^6.2.0",
    "formik": "^2.2.9",
    "framer-motion": "^5.5.5",
    "fs-extra": "^10.0.0",
    "hamburger-react": "^2.4.1",
    "handlebars": "^4.7.7",
    "handlebars-loader": "^1.7.1",
    "hbs": "^4.2.0",
    "history": "^4.10.1",
    "html-inline-css-webpack-plugin": "^1.11.1",
    "html-to-text": "^8.1.0",
    "html-webpack-plugin": "^5.5.0",
    "https": "^1.0.0",
    "identity-obj-proxy": "^3.0.0",
    "ioredis": "^4.28.2",
    "jest": "^27.4.5",
    "jsdom": "^19.0.0",
    "jsonwebtoken": "^8.5.1",
    "keycode-js": "^3.1.0",
    "large-small-dynamic-viewport-units-polyfill": "^0.0.4",
    "lodash": "^4.17.21",
    "mini-css-extract-plugin": "^2.4.5",
    "nanoid": "^3.1.30",
    "node-cache": "^5.1.2",
    "node-html-parser": "^5.1.0",
    "node-inject-html": "^0.0.5",
    "node-mailjet": "^3.3.4",
    "normalize-url": "^4.5.1",
    "optimize-css-assets-webpack-plugin": "^6.0.1",
    "overmind": "28.0.1",
    "overmind-react": "29.0.1",
    "pnp-webpack-plugin": "^1.7.0",
    "postcss": "^8.4.5",
    "postcss-flexbugs-fixes": "^5.0.2",
    "postcss-import": "^14.0.2",
    "postcss-loader": "^6.2.1",
    "postcss-mixins": "^9.0.1",
    "postcss-nested": "^5.0.6",
    "postcss-nesting": "^10.0.3",
    "postcss-normalize": "^10.0.1",
    "postcss-preset-env": "^7.0.2",
    "prismjs": "^1.25.0",
    "query-string": "^7.0.1",
    "raw-loader": "^4.0.2",
    "re-resizable": "^6.9.1",
    "react": "^17.0.2",
    "react-app-polyfill": "^3.0.0",
    "react-beautiful-dnd": "^13.1.0",
    "react-dev-utils": "^12.0.0",
    "react-dom": "^17.0.2",
    "react-modal": "^3.14.4",
    "react-refresh": "^0.11.0",
    "react-router": "^5.2.1",
    "react-router-config": "^5.1.1",
    "react-router-dom": "^5.2.0",
    "react-tabs": "^4.3.0",
    "react-use": "^17.3.1",
    "react-visibility-sensor": "^5.1.1",
    "reflect-metadata": "^0.1.13",
    "resolve-url-loader": "^4.0.0",
    "rimraf": "^3.0.2",
    "sass": "^1.45.0",
    "scheduler": "^0.20.2",
    "semver": "^7.3.5",
    "serialize-javascript": "^6.0.0",
    "socket.io": "^4.4.0",
    "socket.io-client": "^4.4.0",
    "spinners-react": "^1.0.6",
    "stripe": "^8.194.0",
    "style-loader": "^3.3.1",
    "swiper": "^7.3.3",
    "tailwindcss": "^2.2.4",
    "telegraf": "^4.15.3",
    "terser-webpack-plugin": "^5.3.0",
    "tippy.js": "^6.3.7",
    "ts-jest": "^27.1.2",
    "ts-json-schema-generator": "^0.97.0",
    "ts-loader": "^9.2.6",
    "ts-node": "^10.9.2",
    "ts-pattern": "^4.3.0",
    "tsconfig-paths": "^3.12.0",
    "typeorm": "^0.2.41",
    "universal-analytics": "^0.5.3",
    "url-loader": "^4.1.1",
    "uuid": "^8.3.2",
    "validator": "^13.7.0",
    "webpack": "^5.65.0",
    "webpack-bundle-analyzer": "^4.5.0",
    "webpack-cli": "^4.9.1",
    "webpack-dev-server": "^4.6.0",
    "webpack-manifest-plugin": "^4.0.2",
    "winston": "^3.3.3",
    "workbox-webpack-plugin": "^6.4.2",
    "worker-loader": "^3.0.8",
    "yup": "^0.32.11"
  },
  "volta": {
    "node": "16.20.2",
    "pnpm": "8.14.0"
  },
  "devDependencies": {
    "@playwright/test": "^1.44.0",
    "@size-limit/preset-app": "^11.0.1",
    "@types/body-parser": "^1.19",
    "@types/cache-manager": "^3.4.2",
    "@types/compression": "^1.7.2",
    "@types/cookie-parser": "^1.4.3",
    "@types/cron": "^1.7.3",
    "@types/express": "^4.17.13",
    "@types/express-session": "^1.17.4",
    "@types/hbs": "^4.0.1",
    "@types/history": "^4",
    "@types/html-to-text": "^8.0.1",
    "@types/ioredis": "^4.28.10",
    "@types/jest": "^27.0.3",
    "@types/jsdom": "^16.2.15",
    "@types/jsonwebtoken": "^8.5.6",
    "@types/lodash": "^4.14.178",
    "@types/node": "^16.18.69",
    "@types/node-mailjet": "^3.3.7",
    "@types/prismjs": "^1.16.6",
    "@types/random-words": "^1.1.2",
    "@types/react": "^17.0.37",
    "@types/react-beautiful-dnd": "^13.1.2",
    "@types/react-dom": "^17.0.11",
    "@types/react-modal": "^3.13.1",
    "@types/react-router-config": "^5.0.3",
    "@types/react-router-dom": "^5.3.2",
    "@types/serialize-javascript": "^5.0.1",
    "@types/universal-analytics": "^0.4.5",
    "@types/uuid": "^8.3.3",
    "@types/validator": "^13.7.0",
    "@typescript-eslint/eslint-plugin": "^5.62.0",
    "@typescript-eslint/parser": "^5.62.0",
    "@typescript-eslint/utils": "^5.62.0",
    "cheerio": "^1.0.0-rc.12",
    "cross-process-lock": "^2.1.1",
    "envalid": "^8.0.0",
    "eslint": "^8.56.0",
    "fork-ts-checker-webpack-plugin": "^6.5.3",
    "prettier": "^3.1.1",
    "random-words": "^1.1.2",
    "size-limit": "^11.0.1",
    "tsx": "^4.7.0",
    "turbo": "^1.13.3",
    "turbowatch": "^2.29.4",
    "typescript": "^4.9.5"
  },
  "//packageManager": "When upgrading the version, also change it in Dockerfile.playwright-env.",
  "packageManager": "pnpm@8.14.0",
  "pnpm": {
    "patchedDependencies": {
      "@ckeditor/ckeditor5-media-embed@39.0.2": "patches/@ckeditor+ckeditor5-media-embed+39.0.2.patch",
      "@types/jsdom@16.2.15": "patches/@types+jsdom+16.2.15.patch",
      "@ckeditor/ckeditor5-upload@39.0.2": "patches/@ckeditor__ckeditor5-upload@39.0.2.patch"
    },
    "packageExtensions": {
      "react-aria-live": {
        "dependencies": {
          "prop-types": "^15.8.1"
        }
      },
      "normalize-url@^4": {
        "dependencies": {
          "url": "^0.11.3"
        }
      }
    },
    "//peerDependencyRules": {
      "@sajari/*": "It works, and also it will die in December 2024 so it likely won't be updated."
    },
    "peerDependencyRules": {
      "allowedVersions": {
        "@sajari/react-hooks>react": "17",
        "@sajari/react-search-ui>react": "17",
        "@sajari/react-sdk-utils>react": "17",
        "@sajari/react-hooks>react-dom": "17",
        "@sajari/react-search-ui>react-dom": "17",
        "@sajari/react-sdk-utils>react-dom": "17",
        "@sajari/react-components>react-dom": "17"
      }
    },
    "overrides": {
      "@types/react": "$@types/react",
      "@types/node": "$@types/node",
      "@emotion/react": "$@emotion/react",
      "@emotion/styled": "$@emotion/styled",
      "@emotion/styled-base": "$@emotion/styled-base",
      "@emotion/cache": "$@emotion/cache",
      "@emotion/css": "$@emotion/css",
      "react-error-overlay": "6.0.9",
      "@emotion/core": "$@emotion/core",
      "emotion-theming": "$emotion-theming",
      "fork-ts-checker-webpack-plugin": "$fork-ts-checker-webpack-plugin"
    }
  }
}